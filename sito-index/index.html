<!doctype html>
<html lang="it-IT">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ShareNotes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style_login.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script src="script.js"></script>
    <script src="script_login.js"></script>
    <link rel="icon" href="img\logo_favicon.ico" type="image/x-icon"> <!-- inserire qui una nuova immagine come logo della finestra nel browser, chiedere a forna di farla-->
  </head>
  <body id="corpo">
    <div id="blurrato" class="transition-back">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <header>
          <nav id="navbar" class="navbar navbar-dark bg-light fixed-top">
          <div class="container-fluid">
              <img id="img_logo" src="img/logo.png">
            <button id="menu_button" class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <a href="activate.php"><button class="Functionalities" type="button">Funzionalità</button></a>
            <a href="#"><button class="SearchNotes" type="button">Cerca appunti</button></a>
            <a href="aboutPage.php"><button class="About" type="button">About</button></a>
            <?php
            session_start();
            include ('utils.inc.php');
            $conn = new mysqli("localhost","root","","share-notes");
            if (isLogged()) {
              //style="background-image: url(\'img/loggedIn.png\');"
              echo '<button class="login_button_1" type="button" id="openPopupBtn" style="background-image: url(\'img/login.png\');"></button>';
            }else {
              if (sexOrCock()){
                $nomeUtente = (string) $_SESSION["UserData"]["name"];
              }else {
                $query_nome = "SELECT name FROM user WHERE email='".trim((string) $_COOKIE["UserMail"])."'";
			          $result_nome = $conn->query($query_nome);
			          $nomeUtente = (string) ($result_nome->fetch_assoc())['name'];
              }
              echo '<a href="profile_page.php"><button class="login_button_2" type="button">',$nomeUtente , '</button></a>';
              echo '<a href="logout.php"><button class="logOut" type="button"></button></a>';
            }

            function mostraClassi($conn){
              $queryClassi = "SELECT nome FROM class";
              $resultClassi = $conn->query($queryClassi);
              $numClassi = mysqli_num_rows($resultClassi);
              $class = array();
              while ($row = $resultClassi->fetch_assoc()) {
                $class[] = $row;
              }
              for ($j = 0; $j < $numClassi; $j++) {
                if ((string) $class[$j]["nome"] != "NUL"){
                  echo "<option value='".(string) $class[$j]["nome"]."'>".(string) $class[$j]["nome"]."</option>\n";
                }else {
                  echo "<option value='NULL'>NULL</option>\n";
                }
              }
            }
            ?>
            <!-- to change the side where the off-canvas slides in: change the "offcanvas offcanvas-start ..." to "offcanvas offcanvas-end ..."-->
            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
              <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">ShareNotes</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
              </div>
              <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                  <li class="nav-item">
                    <a class="nav-link active" id="Home" aria-current="page" role="button" href="#">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="Link" role="button" href="#">Link</a>
                  </li>
                </ul>
                <form class="d-flex mt-3" role="search">
                  <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                  <button class="btn btn-success" type="submit">Search</button>
                </form>
              </div>
            </div>
          </div>
        </nav>
      </header>
      <h1 id="main_title">Benvenuti su Sharenotes!</h1>
      <div class="img-text">
        <img id="img_insert" src="img/immagine.png" alt="Inserire l'immagine...">
          <text id="text_1">Prendere appunti, studiare, lavorare in gruppo e condividere con tutti i tuoi lavori!</text>
      </div>
      <div class="Explore">
        <h3 id="title_Explore">Esplora</h3>
        <text id="txt_Explore">Cerca tutti gli appunti che vuoi quando vuoi!</text>
        <div class="Explore_btn">
          <a href="bhopage" alt="ciao ciao"><button class="UniscitiExplore" type="button">Unisciti a noi</button></a>
        </div>
        <img id="img_Explore" src="img/immagine.png" alt="Inserire un'immagine">
      </div>
      <div class="Create">
        <img id="img_Create" src="img/immagine.png" alt="Inserire un'immagine">
        <h3 id="title_Create">Crea</h3>
        <text id="txt_Create">Crea appunti, aiutati con immagini, disegni, schemi, colori e dai vita ad appunti unici!</text>
        <div class="Create_btn">
          <a href="#" alt="ciao ciao"><button class="UniscitiCreate" type="button">Unisciti a noi</button></a>
        </div>
      </div>
      <div class="Share">
        <h3 id="title_Share">Condividi</h3>
        <text id="txt_Share">Condivi con chi desideri i tuoi appunti, aiuta e confrotati con i tuoi amici per migliorare sempre di più!</text>
        <div class="Share_btn">
          <a href="bhopage" alt="ciao ciao"><button class="UniscitiShare" type="button">Unisciti a noi</button></a>
        </div>
        <img id="img_Share" src="img/immagine.png" alt="Inserire un'immagine">
      </div>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </div>
    <!--<button id="openPopupBtn">Apri Popup</button>-->
    <div id="popup" class="popup">
        <div class="popup-content">
            <span class="close" id="closePopupBtn">&times;</span>
            <div class="pop-menu">
                <div class="pop-menu">
                    <h1 class="popup-sets">Crea il tuo<br>SnakeID!</h1>
                    <button id="register" class="register-button">Registrati</button><br>
                    <p class="txt-snakeID">Hai già uno SnakeID?
                        <p>
                            <button id="access" class="login-button">Accedi</button><br>
                </div>
            </div>
        </div>
    </div>
    <a name="accesso"></a>;
    <div id="access-popup" class="popup">
        <div class="popup-content">
            <span class="close" id="closeaccess">&times;</span>
            <div class="pop-menu">
                <h1 class="popup-sets-access">Accedi:</h1>
                <form action="login.php" method="post">
                    <input class="login-inputs" type="text" id="emailInputaccess" name="emailInput" placeholder="E-mail" autocomplete="email" onchange="validateLogin()"><br>
                    <input class="login-inputs" type="password" id="passwordInputaccess" name="passwordInput" placeholder="Password" autocomplete="current-password" onchange="validateLogin()">
                    <input type="checkbox" id="showPasswordAccess" class="checkbox-login"><br>
                    <text>Vuoi rimanere loggato?</text><br>
                    <text>sì</text><input type="checkbox" id="loggedOn" name="stayLogged" onchange="validateLogin()" onchange="onlyOneYes()" value=1>
                    <text>no</text><input type="checkbox" id="loggedOff" name="stayLogged" onchange="validateLogin()" onchange="onlyOneNo()" value=0>
                    <p id="controlloLog" class="ctr-login">
                        <p>
                            <input type="submit" value="Avanti" id="avanti-access" class="avanti-login-button">
                            <!--<button class="avanti-login-button">Avanti</button>-->
                </form>
                <div class="try">
                    <h6 class="no-account">non hai uno SnakeID?!</h6>
                    <button id="register-out" class="register-out-button">Registrati</button><br>
                    <a id="open-popup-reset" href="#" class="pass-lost">hai perso la password?</a>
                    <!-- aggiugnere al posto di "#" il link per la pagina per reimpostare la password-->
                </div>
            </div>
        </div>
    </div>
    <a name="registrazione"></a>;
    <div id="register-popup" class="popup">
        <div class="popup-content">
            <span class="close" id="closeregister">&times;</span>
            <div class="pop-menu-register">
                <h1 class="popup-sets">Registrati:</h1>
                <form action="inserimento.php" method="post">
                    <input class="login-inputs" type="text" id="nickinput" name="nickInput" placeholder="Nickname"><br>
                    <input class="login-inputs" type="text" id="emailInput" name="emailInput" placeholder="E-mail" autocomplete="email" onchange="validatePassword()"><br>
                    <input class="login-inputs" type="password" id="passwordInput" name="passwordInput" placeholder="Password" autocomplete="current-password"><br>
                    <input type="checkbox" id="showPasswordRegister" class="checkbox-register">
                    <input class="login-inputs" type="password" id="passwordInputControl" name="passwordInputControl" placeholder="Conferma password" autocomplete="current-password" onchange="validateEmail()"><br>
                    <select id="classes" name="classe-sel" class="class-select" onchange="validatePassword()">
                        <option value="none">classe</option>
                        <option value="1">test</option>
                        <option value="2">test2</option>
                        <!-- inserire scelte, quella test è di prova -->
                      </select>
                    <p id="controllo" class="ctr-register">
                        <p>
                            <input type="submit" value="Avanti" id="avanti-register" class="avanti-register-button">
                            <!--<button class="avanti-register-button">Avanti</button>-->
                </form>
                <div>
                    <h6 class="no-account">hai già uno SnakeID?!</h6>
                    <button id="access-out" class="login-out-button">Accedi</button>
                </div>
            </div>
        </div>
    </div>
    <div id="popup-requirements" class="popup">
        <div class="popup-content">
            <div class="pop-menu">
                <div class="pop-menu">
                    <h1 class="cookie-title">Noi crediamo nel rispetto della privacy altrui</h1>
                    <p class="cookie-accept-class">Noi e i nostri fornitori archiviamo informazioni quali cookie su un dispositivo (e/o vi accediamo) e trattiamo i dati personali, quali gli identificativi unici e informazioni generali inviate da un dispositivo, per personalizzare gli
                        annunci e i contenuti, misurare le prestazioni di annunci e contenuti, ricavare informazioni sul pubblico e anche per sviluppare e migliorare i prodotti. Con la tua autorizzazione noi e i nostri fornitori possiamo utilizzare dati
                        precisi di geolocalizzazione e identificazione tramite la scansione del dispositivo.</p>
                    <input type="submit" value="rifiuto" id="refuse-requirements" class="refuse-cookie-btn">
                    <input type="submit" value="accetto" id="accept-requirements" class="accept-cookie-btn">
                </div>
            </div>
        </div>
    </div>
    <div id="popup-reset" class="popup">
        <div class="popup-content">
            <span class="close" id="close-reset">&times;</span>
            <div class="pop-menu">
                <div class="pop-menu">
                    <h1 class="popup-reset-sets">Resetta la password</h1>
                    <form action="mailR.php" method="post">
                        <input class="login-inputs" type="text" id="emailInputReset" name="emailInput" placeholder="E-mail" autocomplete="email" onchange="resetCtr()"><br>
                        <p id="ctr-reset" class="ctr-reset-output"></p><br>
                        <input type="submit" value="avanti" id="reset-password-accept" class="avanti-reset-btn">
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>